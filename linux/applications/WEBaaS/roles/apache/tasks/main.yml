- name: "Ensure state of apache_packages"
  yum:
    update_cache: yes
    name: "{{ apache_packages }}"
    state: latest
  notify: "restart httpd"

- name: "Ensure state of selinux to allow httpd to connect to the network"
  seboolean:
    name: "{{ apache_seboolean }}"
    persistent: yes
    state: yes
  with_items: "{{ apache_sebooleans }}"
  loop_control:
    loop_var: apache_seboolean

- name: "Ensure state of apache_ports"
  firewalld:
    port: "{{ apache_port }}"
    zone: public
    permanent: yes
    immediate: true
    state: enabled
  with_items: "{{ apache_ports }}"
  loop_control:
    loop_var: apache_port

- name: "Ensure state of apache_services"
  service:
    name: "{{ apache_service }}"
    enabled: yes
    state: started
  with_items: "{{ apache_services }}"
  loop_control:
    loop_var: apache_service
